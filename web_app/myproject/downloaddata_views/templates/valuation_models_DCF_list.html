{% extends "base.html" %}
{% block content %}
<div class="container">
<div class="jumbotron">
  <p class="h3">Here is the company information and discounted cash flow valuation for your inputted stock ticker</p>
  <hr class="my-4">
    <p class="lead">Company Name: {{company.name[0]}}</p>
    <p class="lead">Stock Ticker: {{company.instance[0]}}</p>
    <p class="lead">EIN Number: {{company.ein_id[0]}}</p>
    <p class="lead">Address: {{company.bas1[0]}}, {{company.cityba[0]}}, {{company.stprba[0]}} {{company.countryba[0]}} {{company.zipba[0]}}</p>
<p class="lead">Fiscal data period used for analysis: {{fiscal_period}}</p>
<p class="lead">Stock price as of {{start_date}} (when the {{fiscal_period}} data was released): <b>{{current_stock_price}}</b></p>
<p class="lead">True value of the stock as of {{start_date}}, based on the DCF model: <b>{{DCF_value}}</b></p>
<p class="lead"><b>{{valuation_message}}</b></p>
<div align="right"><form action="{{url_for('downloaddata_views.VALUATION_MODELS_DCF')}}">
      <input type="submit" value="New Query" />
      </form>
</div>
</div>

  <div class="jumbotron">
  <p class="h4">Steps and calculations used to arrive at the valuation</p>
  <hr class="my-4">
  <p class="lead">1. Input variables and calculations used to arrive at the valuation</p>
  <p>Cash Generated By Operating Activities: {{cash_generated_by_operating_activities}}</p>
  <p>Capital Expenditures: {{capex}}</p>
  <p>Cash and Cash Equivalents: {{cash_equivalents}}</p>
  <p>Long Term Debt (Non-current): {{long_debt}}</p>
  <p>Free Cash Flow: {{free_cash_flow_str}}</p>
  <p>Shares Outstanding: {{shares_outstand}}</p>
  <p>Free Cash Flow Growth Rate: {{expected_growth_rate}}</p>
  <p>Growth Decline Rate (The 'Free Cash Flow Growth Rate' will decline by this % every year): {{growth_decline_rate}}</p>
  <p>Discount Rate: {{discount_rate}}</p>
  <p>Terminal Growth Rate (a value of 2.5-3% is the average growth rate of the economy): {{terminal_growth_rate}}</p>
  <p>Number of years to project future cash flows: {{year_projection}}</p>
  <p class="lead">2. The following table shows the projected free cash flows and the net present value of each of the cash flows. It also shows the formulas used to calculate both values</p>
  </div>
  <table id="data" class="table table-striped">
    <thead>
      <tr>
        <th>year</th>
    		<th>Free Cash Flow (FCF) ($)</th>
    		<th>Net Present Value of FCF ($)</th>
        <th>FCF Formula</th>
        <th>NPV of FCF Formula</th>
      </tr>
    </thead>
    <tbody>
      {% for index,value in cashflow_df.iterrows() %}
        <tr>
          <td>{{ value.year }}</td>
          <td>{{ value.FCF }}</td>
		  <td>{{ value.npv_FCF }}</td>
      <td>{{ value.FCF_formula }}</td>
       <td>{{ value.npv_FCF_formula }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <div class="jumbotron">
  <ul><li><p><a href="https://www.wallstreetprep.com/knowledge/terminal-value/" target="_blank">The growth in perpetuity approach</a> - this is the method used to calculate the stock's terminal FCFs in the table above; the "terminal_value" in the year column. It is the method used to calculate the intrinsic stock price value as shown in steps three and four</p></li>
  <li><p><a href="https://www.wallstreetprep.com/knowledge/terminal-value/" target="_blank">The exit multiple approach</a> - this is an alternative method used to calculate the stock's terminal FCFs. To use this method, simply take the final year's FCF npv and multiply it by a number between 10 to 15.
    In general, it is assumed that a company is sold after year 10. This is the reason why this multiple is usually set between 10 and 15 because it simulates the year at which the company would be sold. To note, it is good to be conservative with our estimates so it is best to avoid setting the mutiple too high. Here are the alternative to steps 3 and 4, for example if you wanted to
  use the exit multiple approach to calculate the company's true stock price value:</p>
  <ul><li>Terminal value = {{final_year_npv_FCF}} (final year FCF NPV) x 12 (simulating the year (multiple) at which the company would be sold) = {{final_year_npv_FCF * 12}}</li>
  <li>3-alternative) Company value = {{company_value_formula_alt}}= {{company_value_alt}}</li>
  <li>4-alternative) Discounted Cash Flow Valuation using exit multiple approach = {{company_value_alt}}(company value) / {{shares_outstand}}(shares outstanding) = <b>${{exit_multiple_valuation}}</b></li></ul></li>
  </ul>
  <p class="lead">3. Next, determining the the true value of the company based on the calculated cash flows.</p>
  <p>Company value = {{company_value_formula}} = <b>{{company_value}}</b></p>
  <p class="lead">4. Finally, get the true value of the stock based on the DCF model.</p>
  <p>Discounted Cash Flow Valuation using growth in perpetuity approach = {{DCF_stock_price_formula}} = <b>{{DCF_value}}</b></p>
  </div>
</div>
{% endblock %}
{% block scripts %}
  <script>
    $(document).ready(function () {
      $('#data').DataTable();
    });
  </script>
{% endblock %}
